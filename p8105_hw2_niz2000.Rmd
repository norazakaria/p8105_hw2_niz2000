---
title: "p8105_hw2_niz2000"
author: "Nora Zakaria"
date: "10/4/2019"
output: github_document
---

```{r}
library(tidyverse)
```

# Problem 1

## Read and Clean the Mr. Trash Wheel Sheet
```{r}
library(readxl)
Trash_Wheel_Data = read_excel("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 1) %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>%
  select(-x15, -x16, -x17) %>%
  mutate(sports_balls = as.integer(round(sports_balls,0)))
```

## Read and Clean Precipitation Data for 2017 and 2018
```{r}
Precipitation_2018 = read_excel("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 5, skip=1) %>%
  janitor::clean_names() %>%
  drop_na() %>%
  mutate(Year = 2018)
```

```{r}
Precipitation_2017 = read_excel("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 6, skip=1) %>%
  janitor::clean_names() %>%
  drop_na() %>%
  mutate(Year = 2017)
```

```{r}
Precipitation_Data = bind_rows(Precipitation_2018, Precipitation_2017) %>%
  janitor::clean_names() %>%
  mutate(
    month = as.numeric(month),
    month = month.abb[month])
```

## About The Data
There are `r nrow(Trash_Wheel_Data)` observations in the dataset "Trash_Wheel_Data." There are `r nrow(Precipitation_Data)` observations in the dataset "Precipitation_Data," including 2017 and 2018 precipitation data. In order to perform this analysis, several key variables for both datasets were identified. In the Trash_Wheel_Data set, we are interested in "year," "month," "sports balls," "weight," "volume," and "homes powered." In the Precipitation_Data set, we are interested in the variables "month" and "total" which demonstrates the amount of precipitation in inches, each month. The variable "month" is present in both the Trash_Wheel_Data and Precipitation_Data datasets, and are both numeric. For the available data, the total amount of precipitation in inches was `r sum(pull(Precipitation_2018, total))` for 2018. The median number of sports balls in a dumpster in 2017 was `r Trash_Wheel_Data %>% filter(year == "2017") %>% pull(sports_balls) %>% median()`. 


# Problem 2

### Cleaning the Data in pols-month.csv
```{r}
pols = 
  read_csv(file = "./data/fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(mon, into = c("year", "month", "day")) %>%
  mutate(
    month = as.numeric(month),
    month = month.abb[month],
    prez_gop = recode(prez_gop, `1` = "gop", `2` = "gop", `0` = "dem"), 
    president = prez_gop) %>%
  select (-prez_dem, -prez_gop, -day)
pols
```

### Cleaning the Data in snp.csv
```{r}
snp = 
  read_csv(file = "./data/fivethirtyeight_datasets/snp.csv") %>%
  janitor::clean_names() %>%
  separate(date, into = c("month", "day", "year")) %>%
  mutate(
    month = as.numeric(month),
    month = month.abb[month]) %>%
  select (starts_with ("year"), everything(), -day)
snp
```

### Tidy the Unemployment Data
```{r}
unemployment =
  read_csv(file = "./data/fivethirtyeight_datasets/unemployment.csv") %>%
  pivot_longer(
    Jan:Dec, 
    names_to = "month",
    values_to = "unemployment rate") %>%
  janitor::clean_names() %>%
  mutate(year = as.character(year)) %>%
  drop_na()
unemployment
```


## Join the Datasets Pols and SNP
```{r}
pols_snp = 
  left_join(pols, snp, by = c("year", "month"))
pols_snp
```

## Join the Datasets Pols_SNP and Unemployment
```{r}
pols_snp_unemployment = 
  left_join(pols_snp, unemployment, by = c("year", "month"))
pols_snp_unemployment
```

## About The Data
Explain briefly what each dataset contained, and describe the resulting dataset (e.g. give the dimension, range of years, and names of key variables).


# Problem 3

## Tidy the Popular_Baby_Names Dataset
```{r}
Popular_Baby_Names = 
  read_csv(file = "data/Popular_Baby_Names.csv") %>%
  janitor::clean_names() %>%
  rename(
    first_name = childs_first_name,
    birth_year = year_of_birth) %>%
  mutate(
    first_name = str_to_lower(first_name),
    ethnicity = str_to_lower(ethnicity),
    gender = str_to_lower(gender)) %>%
  mutate(
    ethnicity = if_else(ethnicity == "asian and paci", "asian and pacific islander", ethnicity),
    ethnicity = if_else(ethnicity == "black non hisp", "black non hispanic", ethnicity),
    ethnicity = if_else(ethnicity == "white non hisp", "white non hispanic", ethnicity)) %>%
  distinct()
Popular_Baby_Names
```

## Table Demontrating Rank in Popularity of "Olivia"
```{r}
Olivia = Popular_Baby_Names %>%
  filter(first_name == "olivia") %>%
  select(birth_year, ethnicity, rank) %>%
  arrange(birth_year) %>%
  pivot_wider(
    names_from = "birth_year",
    values_from = "rank")
library(knitr)
kable(Olivia)
```

## Table Demonstrating Most Popular Male Name
```{r}
Male = Popular_Baby_Names %>%
  filter(
    gender == "male",
    rank == "1") %>%
  select(birth_year, first_name, ethnicity) %>%
  arrange(birth_year) %>%
  pivot_wider(
    names_from = "birth_year",
    values_from = "first_name")
kable(Male)
```




